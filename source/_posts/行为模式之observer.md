---
title: 行为模式之Observer
id: 124
categories:
  - 设计模式
date: 2010-02-28 23:41:00
tags:
---

    

最近项目中遇到一个需求：在服务器进行一次调度以后，要给客户端一个通知，而客户端在调用服务端的调度之前会进行通知的注册。这是一个典型的Observer模式，因此顺便将观察者模式再复习了一次，这个模式其实就只涉及到主题和观察者两个类，也相对比较简单，UML类图如下：

![](http://hi.csdn.net/attachment/201002/28/19059_1267372507LS0k.gif)

顺序图：

![](http://hi.csdn.net/attachment/201002/28/19059_1267372507HwV1.gif)

有了这两个图，观察者模式就一目了然了，这里在讲HF上面的对应的设计原则贴上来：

1**找出程序中会变化的方面，然后将和固定不变的方面相分离**---&gt;在观察者模式中，会改变的是主题的状态，以及观察者的数目和类型。用这个模式，你可以改变依赖于主题状态的对象，却不必改变主题，这就叫提前规划！

2**针对接口编程，不针对实现编程**--&gt;主题和观察者都是用接口：观察者利用主题的接口向主题注册，而主题利用观察者接口通知观察者。这样可以让两者之间运作正常，又同时具有松耦合的优点。

3**多用组合，少用继承**--&gt;观察者模式利用&ldquo;组合&rdquo;将许多观察者组合进主题中，对象之间的这种关系不是通过继承产生的，而是在运行时利用组合的方式而产生的。

</div>