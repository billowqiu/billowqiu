---
title: 求素数
id: 195
categories:
  - 数据结构/算法
date: 2008-05-23 23:07:00
tags:
---

    &nbsp;鉴于以前写程序那种不经过仔细思考及分析的不良习惯，觉得画流程翻还是很必要的，而且养成习惯后，对自己的思维锻炼以及高效正确编程有很大的好处。翻开大一时发的《C程序设计》第二章复习了一下，把上面一个很好的例子自己整理了一下，而且发现一个不错的画流程图的工具(Diagram Designer)。以下为全文：

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<SPAN>问题：将</SPAN><SPAN><FONT face="Times New Roman">1</FONT></SPAN><SPAN>到</SPAN><SPAN><FONT face="Times New Roman">1000</FONT></SPAN><SPAN>之间的素数打印出来。</SPAN>

<SPAN>算法描述：“筛选”法，所谓“筛选法”指的是“</SPAN><SPAN><FONT face="Times New Roman">Eratosthenes</FONT></SPAN><SPAN>筛法”。他采取的方法是，在一张纸上写上</SPAN><SPAN><FONT face="Times New Roman">1</FONT></SPAN><SPAN>到</SPAN><SPAN><FONT face="Times New Roman">1000</FONT></SPAN><SPAN>全部整数，然后逐个判断它们是否是素数，找出一个非素数，就把它挖掉，最后剩下的就是素数。</SPAN>

<SPAN style="mso-ascii-: yes">①</SPAN><SPAN><FONT face="Times New Roman"> 2 3 </FONT></SPAN><SPAN style="mso-ascii-: yes">④</SPAN><SPAN><FONT face="Times New Roman"> 5 </FONT></SPAN><SPAN style="mso-ascii-: yes">⑥</SPAN><SPAN><FONT face="Times New Roman"> 7 </FONT></SPAN><SPAN style="mso-ascii-: yes">⑧</SPAN><SPAN><FONT face="Times New Roman"> </FONT></SPAN><SPAN style="mso-ascii-: yes">⑨</SPAN><SPAN><FONT face="Times New Roman"> </FONT></SPAN><SPAN style="mso-ascii-: yes">⑩</SPAN><SPAN>……</SPAN><FONT face="Times New Roman"> </FONT>

<SPAN>具体做法如下：</SPAN>

<SPAN style="mso-ascii-: yes">⑴</SPAN><SPAN>先将</SPAN><SPAN><FONT face="Times New Roman">1</FONT></SPAN><SPAN>挖掉（因为</SPAN><SPAN><FONT face="Times New Roman">1</FONT></SPAN><SPAN>不是素数）。</SPAN>

<SPAN style="mso-ascii-: yes">⑵</SPAN><SPAN>用</SPAN><SPAN><FONT face="Times New Roman">2</FONT></SPAN><SPAN>去除它后面的各个数，把能被</SPAN><SPAN><FONT face="Times New Roman">2</FONT></SPAN><SPAN>整除的数挖掉，即把</SPAN><SPAN><FONT face="Times New Roman">2</FONT></SPAN><SPAN>的倍数挖掉。</SPAN>

<SPAN style="mso-ascii-: yes">⑶</SPAN><SPAN>用</SPAN><SPAN><FONT face="Times New Roman">3</FONT></SPAN><SPAN>去除它后面的各数，把</SPAN><SPAN><FONT face="Times New Roman">3</FONT></SPAN><SPAN>的倍数挖掉</SPAN>

<SPAN style="mso-ascii-: yes">⑷</SPAN><SPAN>分别用</SPAN><SPAN><FONT face="Times New Roman">4</FONT></SPAN><SPAN>，</SPAN><SPAN><FONT face="Times New Roman">5</FONT></SPAN><SPAN>…各数作为除数去除这些数以后的各数。这个过程一直进行到在除数后面的数已经全被挖掉为止。事实上，只需进行到</SPAN>

<SPAN>上面的算法可以表示为：</SPAN>

<SPAN style="mso-ascii-: yes">⑴</SPAN><SPAN>挖去</SPAN><SPAN><FONT face="Times New Roman">1</FONT></SPAN>

<SPAN style="mso-ascii-: yes">⑵</SPAN><SPAN>用下一个未被挖去的数</SPAN><SPAN><FONT face="Times New Roman">p</FONT></SPAN><SPAN>去除</SPAN><SPAN><FONT face="Times New Roman">p</FONT></SPAN><SPAN>后面的各数，把</SPAN><SPAN><FONT face="Times New Roman">p</FONT></SPAN><SPAN>的倍数挖掉。</SPAN>

<SPAN style="mso-ascii-: yes">⑶</SPAN><SPAN>检查</SPAN><SPAN><FONT face="Times New Roman">p</FONT></SPAN><SPAN>是否小于的整数部分（如果</SPAN><SPAN><FONT face="Times New Roman">n=1000</FONT></SPAN><SPAN>，则检查</SPAN><SPAN><FONT face="Times New Roman">p&lt;31</FONT></SPAN><SPAN>？），如果是，则返回</SPAN><SPAN style="mso-ascii-: yes">⑵</SPAN><SPAN>继续执行，否则就结束。</SPAN>

<SPAN style="mso-ascii-: yes">⑷</SPAN><SPAN>纸上剩下的就是素数。</SPAN>

<SPAN>解题的基本思路有了，但要变成计算机的操作，还要做进一步的分析，如怎样判断一个数是否已被挖掉，怎样找出一个数</SPAN><SPAN><FONT face="Times New Roman">p</FONT></SPAN><SPAN>的倍数，怎样打印出来未被挖掉的数。</SPAN>

<SPAN>用自顶向下逐步细化的方法来处理这个问题，先进行“顶层设计”，见下图。也可以用流程图进行逐步细化。流程图</SPAN><SPAN><FONT face="Times New Roman">1</FONT></SPAN><SPAN>表示流程的粗略情况，把要做的三部分工作分别用</SPAN><SPAN><FONT face="Times New Roman">A</FONT></SPAN><SPAN>、</SPAN><SPAN><FONT face="Times New Roman">B</FONT></SPAN><SPAN>、</SPAN><SPAN><FONT face="Times New Roman">C</FONT></SPAN><SPAN>表示。 </SPAN>
<SPAN>
<DIV forimg="1">[![](http://hiphotos.baidu.com/qiutao%5F2008/abpic/item/50a29d363623c4cea2cc2b28.jpg)](http://hiphotos.baidu.com/qiutao%5F2008/pic/item/50a29d363623c4cea2cc2b28.jpg)</DIV></SPAN>

<SPAN>这三部分还不够具体，要进一步细化。</SPAN><SPAN><FONT face="Times New Roman">A</FONT></SPAN><SPAN>部分可以细化为图</SPAN><SPAN><FONT face="Times New Roman">A</FONT></SPAN><SPAN>。先输入</SPAN><SPAN><FONT face="Times New Roman">n</FONT></SPAN><SPAN>，然后将</SPAN><SPAN><FONT face="Times New Roman">1</FONT></SPAN><SPAN>输入给</SPAN><SPAN><FONT face="Times New Roman">X1</FONT></SPAN><SPAN>，</SPAN><SPAN><FONT face="Times New Roman">2</FONT></SPAN><SPAN>输入</SPAN><SPAN><FONT face="Times New Roman">X2</FONT></SPAN><SPAN>，</SPAN><SPAN><FONT face="Times New Roman">1000</FONT></SPAN><SPAN>输入给</SPAN><FONT face="Times New Roman"><SPAN>X</SPAN><SPAN style="FONT-SIZE: 7.5pt">1000</SPAN></FONT><SPAN style="mso-ascii-: 10.5pt">。</SPAN>

<SPAN style="mso-bidi-font-size: 10.5pt">[![](http://hiphotos.baidu.com/qiutao%5F2008/abpic/item/5bb5041bf679f1c6ac6e7529.jpg)](http://hiphotos.baidu.com/qiutao%5F2008/pic/item/5bb5041bf679f1c6ac6e7529.jpg)</SPAN>

<SPAN style="mso-ascii-: 10.5pt">B部分可以细化为图</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">B</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">。</SPAN>

<SPAN style="mso-bidi-font-size: 10.5pt">[![](http://hiphotos.baidu.com/qiutao%5F2008/abpic/item/735064fb189887314e4aea2a.jpg)](http://hiphotos.baidu.com/qiutao%5F2008/pic/item/735064fb189887314e4aea2a.jpg)</SPAN>

<SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">B</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">中的</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">B1</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">和</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">B2</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">不能再分了。</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">B1</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">处理的方法是：使</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">X1=0</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">，即哪个数不是素数，就使它等于</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">0</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">，以后把不等于</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">0</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">的数打印处理就是所求的素鼠表。</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">B3</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">中的循环体内以</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">D</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">标志的部分还要进一步细化，对</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">D</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">细化为图</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">D</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">。</SPAN>

<SPAN style="mso-bidi-font-size: 10.5pt">[![](http://hiphotos.baidu.com/qiutao%5F2008/abpic/item/74cd06160bb4410b962b432b.jpg)](http://hiphotos.baidu.com/qiutao%5F2008/pic/item/74cd06160bb4410b962b432b.jpg)</SPAN>

<DIV forimg="1"></DIV>

图<SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">D</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">中的</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">E</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">部分还不够具体，再进一步细化为图</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">E</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">。</SPAN>

<SPAN style="mso-ascii-: 10.5pt">[![](http://hiphotos.baidu.com/qiutao%5F2008/abpic/item/e957c817ac1353124b90a735.jpg)](http://hiphotos.baidu.com/qiutao%5F2008/pic/item/e957c817ac1353124b90a735.jpg)</SPAN>

<SPAN style="mso-ascii-: 10.5pt">图</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">E</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">中的</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">F</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">部分又细化为图</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">F</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">，因为首先要判断某一个</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">Xj</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">是否已经被挖掉，如已被挖掉则不必考虑被</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">Xi</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">除。至此，已不能也不需要再分解了。</SPAN>

<SPAN style="mso-bidi-font-size: 10.5pt"><SPAN style="mso-ascii-: 10.5pt">[![](http://hiphotos.baidu.com/qiutao%5F2008/abpic/item/db517951464f5e9c8d543035.jpg)](http://hiphotos.baidu.com/qiutao%5F2008/pic/item/db517951464f5e9c8d543035.jpg)</SPAN></SPAN>

<SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">图1</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">中的</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">C</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">部分进行细化，得图</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">C1</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">。</SPAN>

<SPAN style="mso-bidi-font-size: 10.5pt">[![](http://hiphotos.baidu.com/qiutao%5F2008/abpic/item/2742ef0180aa521d7aec2c31.jpg)](http://hiphotos.baidu.com/qiutao%5F2008/pic/item/2742ef0180aa521d7aec2c31.jpg)</SPAN>

<DIV forimg="1"></DIV>

再对图<SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">C1</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">中的</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">G</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">部分进行细化，得图</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">G</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">。</SPAN>

<SPAN style="mso-bidi-font-size: 10.5pt">[![](http://hiphotos.baidu.com/qiutao%5F2008/abpic/item/2cd0d4083c67e0c263d98637.jpg)](http://hiphotos.baidu.com/qiutao%5F2008/pic/item/2cd0d4083c67e0c263d98637.jpg)</SPAN>

<SPAN style="mso-ascii-: 10.5pt">至此，已将图</SPAN><SPAN style="mso-bidi-font-size: 10.5pt"><FONT face="Times New Roman">1</FONT></SPAN><SPAN style="mso-ascii-: 10.5pt">分解为能用三种基本结构表示的基本操作了。将以上这些图组合起来就可以得到最终的总流程图了，根据这个细化了的流程图已经可以用任何高级语言编写程序了。</SPAN>

有时间再把整个流程图组合在一起，然后把对应的程序也写一下，慢慢来吧，要走的路还长呢！&nbsp;&nbsp;&nbsp;

</div>