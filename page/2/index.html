<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="taocoding">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="taocoding">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="taocoding">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/">





  <title>taocoding</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d13234060d812cb98a47e937139083a9";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">taocoding</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2014/03/11/designing-distributed-systems/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/03/11/designing-distributed-systems/" itemprop="url">Designing Distributed Systems</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-03-11T01:01:58+08:00">
                2014-03-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/architecture/" itemprop="url" rel="index">
                    <span itemprop="name">architecture</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/architecture/转载/" itemprop="url" rel="index">
                    <span itemprop="name">转载</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="Bill-Venners"><a href="#Bill-Venners" class="headerlink" title="Bill Venners"></a>Bill Venners</h4><blockquote>
<p>What is important to keep in mind when you are designing a distributed system?</p>
</blockquote>
<h4 id="Ken-Arnold"><a href="#Ken-Arnold" class="headerlink" title="Ken Arnold"></a>Ken Arnold</h4><blockquote>
<p>We should start off with some notion of what we mean by distributed system. A distributed system, in the sense in which I take any interest, means a system in which the failure of an unknown computer can screw you.</p>
<p><strong>Failure</strong> is not such an important factor for some multicomponent distributed systems. Those systems are tightly controlled; nobody ever adds anything unexpectedly; they are designed so that all components go up and down at the same time. You can create systems like that, but those systems are relatively uninteresting. They are also quite rare.</p>
<p>Failure is the defining difference between distributed and local programming, so you have to design distributed systems with the expectation of failure. Imagine asking people, “If the probability of something happening is one in ten to the thirteenth, how often would it happen?” Your natural human sense would be to answer, “Never.” That is an infinitely large number in human terms. But if you ask a physicist, she would say, “All the time. In a cubic foot of air, those things happen all the time.” When you design distributed systems, you have to say, “Failure happens all the time.” So when you design, you design for failure. It is your number one concern.</p>
<p>Yes, you have to get done what you have to get done, but you have to do it in the context of failure. One reason it is easier to write systems with Jini and RMI (remote method invocation) is because they’ve taken the notion of failure so seriously. We gave up on the idea of local/remote transparency. It’s a nice thought, but so is instantaneous faster-than-light travel. It is demonstrably true that at least so far transparency is not possible.</p>
</blockquote>
<h2 id="Partial-Failure"><a href="#Partial-Failure" class="headerlink" title="Partial Failure"></a>Partial Failure</h2><blockquote>
<p>What does designing for failure mean? One classic problem is partial failure. If I send a message to you and then a network failure occurs, there are two possible outcomes. One is that the message got to you, and then the network broke, and I just couldn’t get the response. The other is the message never got to you because the network broke before it arrived. So if I never receive a response, how do I know which of those two results happened? I cannot determine that without eventually finding you. The network has to be repaired or you have to come up, because maybe what happened was not a network failure but you died.</p>
<p>Now this is not a question you ask in local programming. You invoke a method and an object. You don’t ask, “Did it get there?” The question doesn’t make any sense. But it is the question of distributed computing.</p>
<p>So considering the fact that I can invoke a method on you and not know if it arrives, how does that change how I design things? For one thing, it puts a multiplier on the value of simplicity. The more things I can do with you, the more things I have to think about recovering from. That also means the conceptual cost of having more functionality has a big multiplier. In my nightmares, I’ll tell you it’s exponential, and not merely a multiplier. Because now I have to ask, “What is the recovery strategy for everything on which I interact with you?” That also implies that you want a limited number of possible recovery strategies.</p>
</blockquote>
<h2 id="Transactions"><a href="#Transactions" class="headerlink" title="Transactions"></a>Transactions</h2><blockquote>
<p>So what are those recovery strategies? J2EE (Java 2 Platform, Enterprise Edition) and many distributed systems use transactions. Transactions say, “I don’t know if you received it, so I am forcing the system to act as if you didn’t.” I will abort the transaction. Then if you are down, you’ll come up a week from now and you’ll be told, “Forget about that. It never happened.” And you will.</p>
<p>Transactions are easy to understand: I don’t know if things failed, so I make sure they failed and I start over again. That is a legitimate, straightforward way to deal with failure. It is not a cheap way however.</p>
<p>Transactions tend to require multiple players, usually at least one more player than the number of transaction participants, including the client. And even if you can optimize out the extra player, there are still more messages that say, “Am I ready to go forward? Do you want to go forward? Do you think we should go forward? Yes? Then I think it’s time to go forward.” All of those messages have to happen.</p>
<p>And even with a two-phase commit, there are some small windows that can leave you in ambiguous states. A human being eventually has to interrupt and say, “You know, that thing did go away and it’s never coming back. So don’t wait.” Say you have three participants in a transaction. Two of them agree to go forward and are waiting to be told to go. But the third one crashes at an inopportune time before it has a chance to vote, so the first two are stuck. There is a small window there. I think it has been proven that it doesn’t matter how many phases you add, you can’t make that window go away. You can only narrow it slightly.</p>
<p>So the transactions approach isn’t perfect, although those kinds of problems happen rarely enough. Maybe instead of ten to the thirteenth, the probability is ten to the thirtieth. Maybe you can ignore it, I don’t know. But that window is certainly a worry.</p>
<p>The main point about transactions is that it has overhead. You have to create the transaction and you have to abort it. One of the things that a container like J2EE does for you is that it hides a lot of that from you. Most things just know that there’s a transaction around them. If somebody thinks it should be aborted, it will be aborted. But most things don’t have to participate very directly in aborting the transaction. That makes it simpler.</p>
</blockquote>
<h2 id="Idempotency"><a href="#Idempotency" class="headerlink" title="Idempotency"></a>Idempotency</h2><blockquote>
<p>I tend to prefer something called idempotency. You can’t solve all problems with it, but basically idempotency says that reinvoking the method will be harmless. It will give you an equivalent result as having invoked it once.</p>
<p>If I want to manipulate a bank account, I send in an operation ID: “This is operation number 75. Please deduct $100 from this bank account.” If I get a failure, I just keep sending it until it gets through. If you’re the recipient, you say, “Oh, 75. I’ve seen that one, so I’ll ignore it.” It is a simple way to deal with partial failure. Basically, recovery is simple retry. Or, potentially, you give up by sending a cancel operation for the ID until that gets through. If you want to do that, though, you’re more likely to use transactions so you can abort them.</p>
<p>Generally, with idempotency, everybody needs to know how to go forward. But people don’t often need to know how to go back. I don’t abort a transaction. I just repeatedly try again until I succeed. That means I need to know how to say to do this. I don’t have to deal with all sorts of ugly recovery most of the time.</p>
<p>Now, what happens if failure increases on the network? You start sending messages more often. If that is a problem, for a long distance you can solve it by writing a check and buying more hardware. Hardware is much cheaper than programmers. Other ways of dealing with this tend to increase the system’s complexity, requiring more programmers.</p>
</blockquote>
<h2 id="Bill-Venners-1"><a href="#Bill-Venners-1" class="headerlink" title="Bill Venners"></a>Bill Venners</h2><blockquote>
<p>Do you mean transactions?</p>
</blockquote>
<h2 id="Ken-Arnold-1"><a href="#Ken-Arnold-1" class="headerlink" title="Ken Arnold"></a>Ken Arnold</h2><blockquote>
<p>Transactions on everything can increase complexity. I’m just talking about transactions and idempotency now, but other recovery mechanisms exist.</p>
<p>If I just have to try everything twice, if I can simply reject the second request if something has already been done, I can just buy another computer and a better network—up to some limit, obviously. At some point, that’s no longer true. But a bigger computer is more reliable and cheaper than another programmer. I tend to like simple solutions and scaling problems that can be solved with checkbooks, even though I am a programmer myself.</p>
</blockquote>
<h2 id="Wide-Area-Distributed-Systems"><a href="#Wide-Area-Distributed-Systems" class="headerlink" title="Wide-Area Distributed Systems"></a>Wide-Area Distributed Systems</h2><h4 id="Bill-Venners-2"><a href="#Bill-Venners-2" class="headerlink" title="Bill Venners"></a>Bill Venners</h4><blockquote>
<p>Is there anything in particular about Internet- wide distributed systems or large wide area networks that is different from smaller ones? Dealing with increased latency, for example?</p>
</blockquote>
<h4 id="Ken-Arnold-2"><a href="#Ken-Arnold-2" class="headerlink" title="Ken Arnold"></a>Ken Arnold</h4><blockquote>
<p>Yes, latency has a lot to do with it. When you design anything, local or remote, efficiency one of the things you think about. Latency is an important issue. Do you make many little calls or one big call? One of the great things about Jini is that, if you can use objects, you can present an API whose natural model underneath deals with latency by batching up requests where it can. It adapts to the latency that it is in. So you can get away from some of it, but latency is a big issue.</p>
<p>Another issue is of course security. Inside a corporate firewall you say, “We’ll do something straightforward, and if somebody is mucking around with it, we’ll take them to court.” But that is clearly not possible on the Internet; it is a more hostile environment. So you either have to make things not care, which is fine when you don’t care if somebody corrupts your data. Or, you better make it so they can’t corrupt your data. So aside from latency, security is the other piece to think about in widely distributed systems.</p>
</blockquote>
<h2 id="State-is-Hell"><a href="#State-is-Hell" class="headerlink" title="State is Hell"></a>State is Hell</h2><h4 id="Bill-Venners-3"><a href="#Bill-Venners-3" class="headerlink" title="Bill Venners"></a>Bill Venners</h4><blockquote>
<p>What about state?</p>
</blockquote>
<h4 id="Ken-Arnold-3"><a href="#Ken-Arnold-3" class="headerlink" title="Ken Arnold"></a>Ken Arnold</h4><blockquote>
<p>State is hell. You need to design systems under the assumption that state is hell. Everything that can be stateless should be stateless.</p>
</blockquote>
<h4 id="Bill-Venners-4"><a href="#Bill-Venners-4" class="headerlink" title="Bill Venners"></a>Bill Venners</h4><blockquote>
<p>Define what you mean by that.</p>
</blockquote>
<h4 id="Ken-Arnold-4"><a href="#Ken-Arnold-4" class="headerlink" title="Ken Arnold"></a>Ken Arnold</h4><blockquote>
<p>In this sense, state is essentially something held in one place on behalf of somebody who is in another place, something that is not reconstructible by the other entity that wants it. If I can reconstruct it, it’s called a cache. And caches are often OK. Caching strategies are their own branch of computer science, and you can screw them up. But as a general rule, I send you a bunch of information and you send me the shorthand for it. I start to interact with you using this shorthand. I pass the integer back to you to refer to the cached data: “I’m talking about interaction number 17.” And then you go down. I can send that same state to some equivalent service to you, and build myself back up. That kind of state is essentially a cache.</p>
<p>Caching can get complex. It’s the question that Jini solves with leasing. If one of us goes down, when can the person holding the cache throw this stuff away? Leasing is a good answer to that. There are other answers, but leasing is a pretty elegant one.</p>
<p>On the other hand, if you store information that I can’t reconstruct, then a whole host of questions suddenly surface. One question is, “Are you now a single point of failure?” I have to talk to you now. I can’t talk to anyone else. So what happens if you go down?</p>
<p>To deal with that, you could be replicated. But now you have to worry about replication strategies. What if I talk to one replicant and modify some data, then I talk to another? Is that modification guaranteed to have already arrived there? What is the replication strategy? What kind of consistency do you need—tight or loose? What happens if the network gets partitioned and the replicants can’t talk to each other? Can anybody proceed?</p>
<p>There are answers to these questions. A whole branch of computer science is devoted to replication. But it is a nontrivial issue. You can almost always get into some state where you can’t proceed. You no longer have a single point of failure. You have reduced the probability of not being able to proceed, but you haven’t eliminated it.</p>
<p>If my interaction with you is stateless in the sense I’ve described—nothing more than a cache—then your failure can only slow me down if there’s an equivalent service to you. And that equivalent service can come up after you go down. It doesn’t necessarily have to be there in advance for failover.</p>
<p>So, generally, state introduces a whole host of problems and complications. People have solved them, but they are hell. So I follow the rule: make everything you can stateless. If there is one piece of the system you can’t make stateless—it has to have state—to the extent possible make it hold all the state. Have as few stateful components as you can.</p>
<p>If you end up with a system of five components and two of them have state, ask yourself if only one can have state. Because, assuming all components are critical, if either of the two stateful components goes down you are screwed. So you might as well have just one stateful component. Then at least four, instead of three, components have this wonderful feature of robustability. There are limits to how hard you should try to do that. You probably don’t want to put two completely unrelated things together just for that reason. You may want to implement them in the same place. But in terms of defining the interfaces and designing the systems, you should avoid state and then make as many components as possible stateless. The best answer is to make all components stateless. It is not always achievable, but it’s always my goal.</p>
</blockquote>
<h4 id="Bill-Venners-5"><a href="#Bill-Venners-5" class="headerlink" title="Bill Venners"></a>Bill Venners</h4><blockquote>
<p>All these databases lying around are state. On the Web, every Website has a database behind it.</p>
</blockquote>
<h4 id="Ken-Arnold-5"><a href="#Ken-Arnold-5" class="headerlink" title="Ken Arnold"></a>Ken Arnold</h4><blockquote>
<p>Sure, the file system underneath a Website, even if it’s just HTML, is a database. And that is one case where state is necessary. How am I going to place an order with you if I don’t trust you to hold onto it? So in that case, you have to live with state hell. But a lot of work goes into that dealing with that state. If you look at the reliable, high-performance sites, that is a very nontrivial problem to solve. It is probably the distributed state problem that people are most familiar with. Anyone who has dealt with any large scale, high availability, or high performance piece of the problem knows that state is hell because they’ve lived with that hell. So the question is, “Why have more hell than you need to have?” You have to try and avoid it. <strong><em>Avoid. Avoid. Avoid.</em></strong></p>
</blockquote>
<p>原文地址：<br><a href="http://www.artima.com/intv/distrib.html" title="design distributed system" target="_blank" rel="noopener">http://www.artima.com/intv/distrib.html</a>.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2014/02/23/liunx系统监控-vmstat/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/02/23/liunx系统监控-vmstat/" itemprop="url">liunx系统监控-vmstat</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-02-23T22:40:55+08:00">
                2014-02-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/工具/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/工具/转载/" itemprop="url" rel="index">
                    <span itemprop="name">转载</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>vmstat是一个很全面的性能分析工具，可以观察到系统的进程 状态、内存使用、虚拟内存使用、磁盘的 IO、中断、上下问切 换、CPU使用等。系统性能分析工具中，我使用最多的是这个，除了 sysstat 工具包外，这个工具能查看的系统资源最多。对于 Linux 的性能分析，100%理解 vmstat 输出内容的含义， 那你对系统性能分析的能力就算是基本掌握了。我这里主要说明一下这个命令显示出的部分数据代表的含义，和 它反映出系统相关资源的状况。输出内容共有 6 类，分别说明如下。</p>
<h3 id="典型vmstat输出"><a href="#典型vmstat输出" class="headerlink" title="典型vmstat输出"></a>典型vmstat输出</h3><p><img src="/images/2014/02/vmstat-output.png" alt="" title="vmstat输出"></p>
<h3 id="procs"><a href="#procs" class="headerlink" title="procs"></a>procs</h3><ul>
<li><p>r运行的和等待(CPU时间片)运行的进程数， 这个值也可以判断是否需要增加CPU(长期大于1)</p>
</li>
<li><p>b处于不可中断状态的进程数，常见的情况 是由IO引起的</p>
</li>
</ul>
<h3 id="Memory"><a href="#Memory" class="headerlink" title="Memory"></a>Memory</h3><ul>
<li>swpd: 切换到交换内存上的内存(默认以KB为单位) 如果 swpd 的值不为0，或者还比较大，比如超过100M了，但是 si, so 的值长期为 0，这种情况我们可以不用担心，不会影响系统性能。</li>
<li>free: 空闲的物理内存</li>
<li>buff: 作为buffer cache的内存，对块设备的读写进行缓冲</li>
<li>cache: 作为page cache的内存, 文件系统的cache 如果 cache 的值大的时候，说明cache住的文件数多，如果频 繁访问到的文件都能被cache住，那么磁盘的读IO-bi会非常小。</li>
</ul>
<h3 id="Swap"><a href="#Swap" class="headerlink" title="Swap"></a>Swap</h3><ul>
<li>si: 交换内存使用，由磁盘调入内存</li>
<li>so: 交换内存使用，由内存调入磁盘</li>
</ul>
<p>内存够用的时候，这2个值都是0，如果这2个值长期 大于0时，系统性能会受到影响。磁盘IO和CPU资 源都会被消耗。我发现有些朋友看到空闲内存(free)很少或接近于0 时，就认为内存不够用了，实际上不能光看这一点 的，还要结合si,so， 如果free很少，但是si,so也很 少(大多时候是0)，那么不用担心，系统性能这时 不会受到影响的。</p>
<h3 id="Io"><a href="#Io" class="headerlink" title="Io"></a>Io</h3><ul>
<li>bi: 从块设备读入的数据总量(读磁盘) (KB/s)，</li>
<li>bo: 写入到块设备的数据总理(写磁盘)(KB/s)</li>
</ul>
<p>随机磁盘读写的时候，这2个值越大（如超出1M），能看到CPU在IO等待的值也会越大</p>
<h3 id="System"><a href="#System" class="headerlink" title="System"></a>System</h3><ul>
<li>in: 每秒产生的中断次数</li>
<li>cs: 每秒产生的上下文切换次数 上面这2个值越大，会看到由内核消耗的CPU时间会越多</li>
</ul>
<h3 id="Cpu"><a href="#Cpu" class="headerlink" title="Cpu"></a>Cpu</h3><ul>
<li>us: 用户进程消耗的CPU时间百分比 us的值比较高时，说明用户进程消耗的CPU时间多，但是如果 长期超过50% 的使用，那么我们就该考虑优化程序算法或者进 行加速了(比如 PHP/Perl)</li>
<li>sy: 内核进程消耗的CPU时间百分比 sy 的值高时，说明系统内核消耗的CPU资源多，这并不是良性 的表现，我们应该检查原因。</li>
<li>wa: IO等待消耗的CPU时间百分比 wa 的值高时，说明IO等待比较严重，这可能是由于磁盘大量作 随机访问造成，也有可能是磁盘的带宽出现瓶颈(块操作)。</li>
<li>id: CPU处在空闲状态时间百分比</li>
</ul>
<h3 id="情景分析"><a href="#情景分析" class="headerlink" title="情景分析"></a>情景分析</h3><p>这个vmstat的输出那些信息值得关注</p>
<ul>
<li>Procs r: 运行的进程比较多，系统很繁忙</li>
<li>Io bo: 磁盘写的数据量稍大，如果是大文件的写，10M以内基本不用担心，如果是小文件写2M以内基本正常</li>
<li>Cpu us: 持续大于50，服务高峰期可以接受</li>
<li>Cpu wa: 稍微有些高</li>
<li>Cpu id:持续小于50，服务高峰期可以接受</li>
</ul>
<p>转载并整理自：<a href="http://fafeng.blogbus.com/logs/6541705.html" target="_blank" rel="noopener">http://fafeng.blogbus.com/logs/6541705.html</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2013/11/10/利用分布式缓存实现分布式锁/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2013/11/10/利用分布式缓存实现分布式锁/" itemprop="url">利用分布式缓存实现分布式锁</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2013-11-10T23:40:26+08:00">
                2013-11-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/architecture/" itemprop="url" rel="index">
                    <span itemprop="name">architecture</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>之前在系统中有做一个在客户端重试时，进行去重的逻辑，大致思路是将客户端的请求缓存到分布式缓存中，每次请求到达时先在缓存中查询，如果有就直接返回，没有就帮用户重试该请求。一天晚上<span style="font-family: 'Times New Roman';">(</span><span style="font-family: 宋体;">不凑巧，刚好是结婚当天</span><span style="font-family: 'Times New Roman';">)</span><span style="font-family: 宋体;">，一个微信会话来了，某某老大的评论重复……</span></p>
<h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>上面在写数据前，会先请求一次缓存，但是这个操作在分布式环境下显然会有如下场景出现：</p>
<p>①　节点<span style="font-family: 'Times New Roman';">A</span><span style="font-family: 宋体;">，</span><span style="font-family: 'Times New Roman';">Get</span><span style="font-family: 宋体;">数据，返回不存在</span></p>
<p>②　节点<span style="font-family: 'Times New Roman';">B</span><span style="font-family: 宋体;">，</span><span style="font-family: 'Times New Roman';">Get</span><span style="font-family: 宋体;">数据，返回不存在</span></p>
<p>③　节点<span style="font-family: 'Times New Roman';">A</span><span style="font-family: 宋体;">写数据</span></p>
<p>④　节点<span style="font-family: 'Times New Roman';">A</span><span style="font-family: 宋体;">返回</span></p>
<p>⑤　节点<span style="font-family: 'Times New Roman';">B</span><span style="font-family: 宋体;">写数据</span></p>
<p>⑥　节点<span style="font-family: 'Times New Roman';">B</span><span style="font-family: 宋体;">返回</span></p>
<p>&nbsp;</p>
<p>根本原因就是<span style="font-family: 'Times New Roman';">Get</span><span style="font-family: 宋体;">数据和</span><span style="font-family: 'Times New Roman';">Set</span><span style="font-family: 宋体;">数据不是原子操作，导致出现了</span><span style="font-family: 'Times New Roman';">A</span><span style="font-family: 宋体;">，</span><span style="font-family: 'Times New Roman';">B</span><span style="font-family: 宋体;">都认为数据不存在。</span></p>
<p>问题很明显，就是没有对数据操作进行同步，如果在单机环境下，这个可以很简单的通过操作系统提供的各种同步原语处理，但是现在节点<span style="font-family: 'Times New Roman';">A</span><span style="font-family: 宋体;">，</span><span style="font-family: 'Times New Roman';">B</span><span style="font-family: 宋体;">是处在不同机器上，这就涉及到分布式锁的问题了。类似于单机环境下的线程同步原语，我们只需要一种机制让应用程序知道某个资源被占用了（例如</span><span style="font-family: 'Times New Roman';">mutex</span><span style="font-family: 宋体;">如果</span><span style="font-family: 'Times New Roman';">lock</span><span style="font-family: 宋体;">失败，操作系统即会将该进程挂起），在分布式缓存中一般都存在一个叫做</span><span style="font-family: 'Times New Roman';">add</span><span style="font-family: 宋体;">的操作，该操作保证只有在资源不存在时才能执行成功，否则会告知调用者失败，且标注为特殊的错误码。</span></p>
<p>&nbsp;</p>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>这里只简单给出了获取锁一般实现伪代码，不同的业务场景有不同的处理，比如失败后继续重试直到成功。</p>
<p>在<span style="font-family: 'Times New Roman';">memcache</span><span style="font-family: 宋体;">中：</span></p>
<p><pre class="brush:cpp">if(cache-&gt;add(key, value, expire))<br>{<br>    //get lock successful<br>}<br>else<br>{<br>    //get lock fail<br>}</pre><br>在<span style="font-family: 'Times New Roman';">Redis</span><span style="font-family: 宋体;">中可以通过</span><span style="font-family: 'Times New Roman';">SET</span><span style="font-family: 宋体;">命令</span><span style="font-family: 'Times New Roman';">(2.6.12</span><span style="font-family: 宋体;">以上版本</span><span style="font-family: 'Times New Roman';">)</span><span style="font-family: 宋体;">或者</span><span style="font-family: 'Times New Roman';">SETNX</span><span style="font-family: 宋体;">命令，类似</span><span style="font-family: 'Times New Roman';">memcache</span><span style="font-family: 宋体;">中的</span><span style="font-family: 'Times New Roman';">ADD</span></p>
<p>SET key value NX EX max_lock_time<span style="font-family: 宋体;">。在</span><a href="https://github.com/andymccurdy/redis-py" target="_blank" rel="noopener">redis-py</a>中有一个封装好的<span style="font-family: 'Times New Roman';">lock</span><span style="font-family: 宋体;">实现可以直接使用。</span></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>像<span style="font-family: 'Times New Roman';">memcache</span><span style="font-family: 宋体;">，</span><span style="font-family: 'Times New Roman';">redis</span><span style="font-family: 宋体;">这里系统一般都是作为缓存来使用，但是在某些时候通过深入挖掘其实也可以有一些意想不到的作用，通过一个简单的语句既可以实现一个基本上够用的分布式锁，其性价比不言而喻。在网上随便一搜，也有好多类似的同行遇到这个问题，下面是几个链接，有国产的也有国外：</span></p>
<p><a href="http://abhinavsingh.com/blog/2009/12/how-to-use-locks-for-assuring-atomic-operation-in-memcached/" target="_blank" rel="noopener">http://abhinavsingh.com/blog/2009/12/how-to-use-locks-for-assuring-atomic-operation-in-memcached/</a></p>
<p><a href="http://chuyinfeng.com/p/39" target="_blank" rel="noopener">http://chuyinfeng.com/p/39</a></p>
<p><a href="http://blog.webfuns.net/archives/1722.html" target="_blank" rel="noopener">http://blog.webfuns.net/archives/1722.html</a></p>
<p><a href="http://jiangbo.me/blog/2011/02/27/post/" target="_blank" rel="noopener">http://jiangbo.me/blog/2011/02/27/post/</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2013/10/20/thrift多路复用的设计与实现/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2013/10/20/thrift多路复用的设计与实现/" itemprop="url">Thrift多路复用的设计与实现</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2013-10-20T17:15:59+08:00">
                2013-10-20
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/C/设计模式/" itemprop="url" rel="index">
                    <span itemprop="name">设计模式</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div><br><br># 介绍<br><br>Thrift<span style="font-family: 微软雅黑;">作为一个跨语言的</span><span style="font-family: Times New Roman;">rpc</span><span style="font-family: 微软雅黑;">框架，为后端服务间的多语言混合开发提供了高可靠，可扩展，以及高效的实现。但是自从</span><span style="font-family: Times New Roman;">2007</span><span style="font-family: 微软雅黑;">年</span><span style="font-family: Times New Roman;">facebook</span><span style="font-family: 微软雅黑;">开源后的</span><span style="font-family: Times New Roman;">6</span><span style="font-family: 微软雅黑;">年时间内一直缺少一个多路复用的功能</span><span style="font-family: Times New Roman;">(</span>Multiplexing Services)<span style="font-family: 微软雅黑;">，也就是在一个</span><span style="font-family: Times New Roman;">Server</span><span style="font-family: 微软雅黑;">上面实现多个</span><span style="font-family: Times New Roman;">Service</span><span style="font-family: 微软雅黑;">调用。比如要实现一个后端服务，很多时候不仅仅只是实现业务服务接口，往往还会预留一些调试，监控服务接口，以往要实现多个</span><span style="font-family: Times New Roman;">Service</span><span style="font-family: 微软雅黑;">在一个</span><span style="font-family: Times New Roman;">Server</span><span style="font-family: 微软雅黑;">上面调用，要么将多个服务糅合成一个庞大的服务（图</span><span style="font-family: Times New Roman;">1</span><span style="font-family: 微软雅黑;">），要么将多个</span><span style="font-family: Times New Roman;">Service</span><span style="font-family: 微软雅黑;">分摊到不同的</span><span style="font-family: Times New Roman;">Server</span><span style="font-family: 微软雅黑;">上（图</span><span style="font-family: Times New Roman;">2</span><span style="font-family: 微软雅黑;">）。最近的版本</span><span style="font-family: Times New Roman;">0.9.1</span><span style="font-family: 微软雅黑;">终于实现内置的多路复用，本文将就该功能简要分析一下该功能的设计与实现，并提供一个简单的示例。</span><br><br><a href="/images/2013/10/thrift-monolithic-interface.png"><img src="/images/2013/10/thrift-monolithic-interface.png" alt="thrift-monolithic-interface"></a><br><br>图1<br><br><a href="/images/2013/10/thrift-multi-server.png"><img src="/images/2013/10/thrift-multi-server.png" alt="thrift-multi-server"></a><br><br>图2<br><br>&nbsp;<br><br>## 设计<br><br>Thrift<span style="font-family: 微软雅黑;">的架构如下：</span><br><br><a href="/images/2013/10/thrift-arch.png"><img src="/images/2013/10/thrift-arch.png" alt="thrift-arch"></a><br><br>Thrift<span style="font-family: 微软雅黑;">采取了很优雅的分层设计，下面简述各层的主要功能：</span><br><br>Ø Transport<br><br>负责传输数据的接口，有文件，内存，套接字等实现。<br><br>Ø Protocol<br><br>负责数据的协议交互接口，有二进制，<span style="font-family: Times New Roman;">Json</span><span style="font-family: 微软雅黑;">等实现。</span><br><br>Ø Processor<br><br>负责输入输出数据处理的接口，其实就是对<span style="font-family: Times New Roman;">Protocol</span><span style="font-family: 微软雅黑;">的处理。</span><br><br>Ø Server<br><br>包括了上面各层的创建和管理，并提供网络服务的功能，网络服务这块目前有四个实现，分别是最简单的单线程阻塞，多线程阻塞，线程池阻塞和基于<span style="font-family: Times New Roman;">libevent</span><span style="font-family: 微软雅黑;">的非阻塞模式。</span><br><br>实现多路复用有以下几个需要注意的地方：<br><br>Ø 不修改现有的<span style="font-family: Times New Roman;">Thrift</span><span style="font-family: 微软雅黑;">代码，主要是指向后兼容，旧代码可以在新版本中编译</span><br><br>Ø 不修改<a href="http://thrift.apache.org/static/files/thrift-20070401.pdf" target="_blank" rel="noopener">白皮书</a>上说的协议<br><br>Ø 不依赖任何<span style="font-family: Times New Roman;">Server</span><span style="font-family: 微软雅黑;">层代码，也不需要新的</span><span style="font-family: Times New Roman;">Server</span><span style="font-family: 微软雅黑;">实现</span><br><br>0.9.1<span style="font-family: 微软雅黑;">之前版本不能多个</span><span style="font-family: Times New Roman;">Service</span><span style="font-family: 微软雅黑;">在同一个</span><span style="font-family: Times New Roman;">Server</span><span style="font-family: 微软雅黑;">上面调用，主要是因为在协议层只把</span><span style="font-family: Times New Roman;">Service</span><span style="font-family: 微软雅黑;">的函数名打包，没有将</span><span style="font-family: Times New Roman;">ServiceName</span><span style="font-family: 微软雅黑;">打包进去，所以在</span><span style="font-family: Times New Roman;">Processor</span><span style="font-family: 微软雅黑;">层默认只能处理一个</span><span style="font-family: Times New Roman;">Service</span><span style="font-family: 微软雅黑;">。</span><br><br>新版本中通过新增以下设计完成了<span style="font-family: Times New Roman;">Service</span><span style="font-family: 微软雅黑;">的多路复用：</span><br><br><a href="/images/2013/10/thrift-multiplex-arch.png"><img src="/images/2013/10/thrift-multiplex-arch.png" alt="thrift-multiplex-arch"></a><br><br><a href="/images/2013/10/thrift-multiplex.png"><img src="/images/2013/10/thrift-multiplex.png" alt="thrift-multiplex"></a><br><br>深色部分为新增部分，需要多个<span style="font-family: Times New Roman;">Service</span><span style="font-family: 微软雅黑;">复用</span><span style="font-family: Times New Roman;">Server</span><span style="font-family: 微软雅黑;">的客户端需要使用新的</span><span style="font-family: Times New Roman;">Protocol</span><span style="font-family: 微软雅黑;">实现，支持</span><span style="font-family: Times New Roman;">Service</span><span style="font-family: 微软雅黑;">复用的服务端需要通过新的</span><span style="font-family: Times New Roman;">Processor</span><span style="font-family: 微软雅黑;">实现注册不同的</span><span style="font-family: Times New Roman;">Service</span><span style="font-family: 微软雅黑;">。</span><br><br>## 实现<br><br>从<span style="font-family: Times New Roman;">release-notes</span><span style="font-family: 微软雅黑;">看到目前已经有</span><span style="font-family: Times New Roman;">Java</span><span style="font-family: 微软雅黑;">，</span><span style="font-family: Times New Roman;">Delphi</span><span style="font-family: 微软雅黑;">，</span><span style="font-family: Times New Roman;">C#</span><span style="font-family: 微软雅黑;">，</span><span style="font-family: Times New Roman;">C++</span><span style="font-family: 微软雅黑;">几个语言实现了该功能，具体到</span><span style="font-family: Times New Roman;">C++</span><span style="font-family: 微软雅黑;">实现按照</span><a href="https://issues.apache.org/jira/browse/THRIFT-1902" target="_blank" rel="noopener">THRIFT-1902</a>的介绍，是直接移植的<span style="font-family: Times New Roman;">java</span><span style="font-family: 微软雅黑;">版本。</span><br><br>### 新增代码<br><br>protocol/TMultiplexedProtocol.h<br><br>protocol/TMultiplexedProtocol.cpp<br><br>protocol/TProtocolDecorator.h<br><br>processor/TMultiplexedProcessor.h<br><br>### 主要逻辑<br><br>1) TMultiplexedProtocol类重写writeMessageBegin_virt方法，在Service<span style="font-family: 微软雅黑;">的函数名前新增了</span><span style="font-family: Times New Roman;">ServiceName</span><span style="font-family: 微软雅黑;">，并附带了一个分隔符；该类采取了</span>decorator模式将绝大部分操作转发到实际的protocol<span style="font-family: 微软雅黑;">对象。</span><br><br>2) TMultiplexedProcessor类增加了一个存放service<span style="font-family: 微软雅黑;">的</span><span style="font-family: Times New Roman;">map</span><span style="font-family: 微软雅黑;">，</span><br><br>typedef std::map&lt; std::string, shared_ptr&lt;TProcessor&gt; &gt; services_t;<br><br>key为ServiceName，这样在process方法中先解出TMultiplexedProtocol传递过来的ServiceName，通过该key查找到对应的Processor对象，再调用该Processor的process方法，这样就完美的实现了多个serivice的共存。<br><br>## 使用示例<br><br>IDL:<br><pre class="brush:other">namespace cpp thrift.multiplex.demo<br><br>service FirstService<br>{<br>    void blahBlah()<br>}<br><br>service SecondService<br>{<br>    void blahBlah()<br>}</pre><br>Server:<br><pre class="brush:cpp">int port = 9090;<br>shared_ptr&lt;TProcessor&gt; processor1(new FirstServiceProcessor<br>         (shared_ptr&lt;FirstServiceHandler&gt;(new FirstServiceHandler())));<br>shared_ptr&lt;TProcessor&gt; processor2(new SecondServiceProcessor<br>         (shared_ptr&lt;SecondServiceHandler&gt;(new SecondServiceHandler())));<br><br>//使用MultiplexedProcessor<br>shared_ptr&lt;TMultiplexedProcessor&gt; processor(new TMultiplexedProcessor());<br><br>//注册各自的Service<br>processor-&gt;registerProcessor(“FirstService”, processor1);<br>processor-&gt;registerProcessor(“SecondService”, processor2);<br><br>shared_ptr&lt;TServerTransport&gt; serverTransport(new TServerSocket(port));<br>shared_ptr&lt;TTransportFactory&gt; transportFactory(new TBufferedTransportFactory());<br>shared_ptr&lt;TProtocolFactory&gt; protocolFactory(new TBinaryProtocolFactory());<br>TSimpleServer server(processor, serverTransport, transportFactory, protocolFactory);<br>server.serve();</pre><br>Client:<br><pre class="brush:cpp">shared_ptr&lt;TSocket&gt; transport(new TSocket(“localhost”, 9090));<br>transport-&gt;open();<br><br>shared_ptr&lt;TBinaryProtocol&gt; protocol(new TBinaryProtocol(transport));<br>shared_ptr&lt;TMultiplexedProtocol&gt; mp1(new TMultiplexedProtocol(protocol, “FirstService”));<br>shared_ptr&lt;FirstServiceClient&gt; service1(new FirstServiceClient(mp1));<br>shared_ptr&lt;TMultiplexedProtocol&gt; mp2(new TMultiplexedProtocol(protocol, “SecondService”));<br>shared_ptr&lt;SecondServiceClient&gt; service2(new SecondServiceClient(mp2));<br><br>service1-&gt;blahBlah();<br>service2-&gt;blahBlah();</pre><br><br>## 总结<br><br>Thrift<span style="font-family: 微软雅黑;">通过在客户端采取的</span>decorator模式巧妙的在协议层将ServiceName<span style="font-family: 微软雅黑;">传递到服务端，服务端通过常见的手段将</span><span style="font-family: Times New Roman;">ServiceName</span><span style="font-family: 微软雅黑;">和具体的</span><span style="font-family: Times New Roman;">Processor</span><span style="font-family: 微软雅黑;">进行映射，完美的解决了</span><span style="font-family: Times New Roman;">Service</span><span style="font-family: 微软雅黑;">的多路复用问题。</span><br><br>## 参考资料<br><br>1. <a href="http://thrift.apache.org/docs/concepts/" target="_blank" rel="noopener">http://thrift.apache.org/docs/concepts/</a><br><br>2. <a href="https://issues.apache.org/jira/browse/THRIFT-1902" target="_blank" rel="noopener">https://issues.apache.org/jira/browse/THRIFT-1902</a><br><br>3. <a href="https://issues.apache.org/jira/browse/THRIFT-563" target="_blank" rel="noopener">https://issues.apache.org/jira/browse/THRIFT-563</a><br><br>4. <a href="http://bigdata.impetus.com/whitepaper" target="_blank" rel="noopener">http://bigdata.impetus.com/whitepaper</a><br><br></div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2013/09/09/qzone说说架构笔记/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2013/09/09/qzone说说架构笔记/" itemprop="url">qzone说说架构笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2013-09-09T00:05:09+08:00">
                2013-09-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/未分类/" itemprop="url" rel="index">
                    <span itemprop="name">未分类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天听了QZone说说部分的架构分享，是这个系列分享迄今为止干货最多的一次，分享者讲得比较快，但是都很实在，个人觉得主要有以下几点值得学习：</p>
<ol>
<li>对CAP的应用，说说选择了AP，对于C是最终一致，大多数互联网系统应该都是这样</li>
<li>削峰填谷，主要是每年除夕，元旦等高峰期请求量暴涨，这个时候如果只是盲目的进行扩容是不太合适的，通过类似队列方式进行异步处理是比较好的削峰手段(新浪微博计数服务采用这个)，由于说说属于UGC性质，用户对实时性和准确性要求较高，采用的是一个单独的cache服务，且只会在判断为高峰期才会自动打开</li>
<li>高峰期时的柔性可用，有选择的舍弃一些不太重要的服务，比如同步到个性签名，微博等</li>
<li>数据存储结构（按uin存，每个uin最多保留3条记录），这个方案跟最近我遇到的一个问题类似，不过我最后还是采取的按照session来存数据</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2013/09/01/通过开源软件赚钱的几个途径/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2013/09/01/通过开源软件赚钱的几个途径/" itemprop="url">通过开源软件赚钱的几个途径</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2013-09-01T01:17:18+08:00">
                2013-09-01
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/未分类/" itemprop="url" rel="index">
                    <span itemprop="name">未分类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>近两年开始完全转向后台相关开发后，接触了不少开源软件，学习和使用优秀的开源软件不仅是对自己技术方面的提升，更能直接的获得不少物质上的收益，下面是我目前总结的两个途径：</p>
<p><strong>写书</strong></p>
<p>展开来讲，跟开源软件相关的书籍主要有两类：</p>
<ol>
<li>源码剖析，比较典型的有lighttpd源码剖析，hadoop源码分析；</li>
<li>入门指导之类，比如mongdb权威指南，hadoop权威指南<br><strong>做增值服务 </strong></li>
</ol>
<p>目前知道的有以下几类：</p>
<ol>
<li>cloudera之于hadoop</li>
<li>Garantia Data对memcached和redis提供的集群服务</li>
<li>ngxin成立了一个单独的商业公司提供更强的功能</li>
<li>为mongodb提高监控功能的serverdensity和mongodirector<br>貌似源码分析之类的书基本上都是国内，权威指南之类的大多先是国外，增值服务的基本上都是国外的</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2013/07/29/vmware虚拟机copy或move/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2013/07/29/vmware虚拟机copy或move/" itemprop="url">vmware虚拟机copy或move</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2013-07-29T00:03:46+08:00">
                2013-07-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/未分类/" itemprop="url" rel="index">
                    <span itemprop="name">未分类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天把用了三年多的xp换成了win7，有很多软件是不需要重装的，但是vmware必须得重装，接踵而至的就是vmware虚拟的IP段和网卡地址变化，导致打开原有的虚拟机时会提示类似“I copy it or move it”。</p>
<p>这个应该是因为vmware网卡变化导致的，网上有找到这个copy和move的区别：</p>
<ul>
<li><span style="line-height: 1.714285714; font-size: 1rem;">选择I copied it的时候，VMware软件检测到物理机改变后会对个虚拟机重新生成新的网卡MAC地址，UUID</span></li>
<li><span style="line-height: 1.714285714; font-size: 1rem;">选择I moved it，只改变UUID，虚拟机其它配置不变</span><br>我一般都习惯性的选择move，看来这个习惯还是正确的，呵呵，但是虚拟机IP还是得修改才能方便使用，例如重装前装的虚拟机IP大致如下：</li>
</ul>
<p><img src="/images/2013/07/suse_ifconfig_old.png" alt="suse_ifconfig_old"><br>而重装后vmware的IP地址发生了变化：<br><img src="/images/2013/07/vmware8_ipconfig.png" alt="vmware8_ipconfig">这就导致打开的虚拟机IP段和vmware的不匹配，从而无法与vmware通信，进而与本机实体机通信，最简单的临时方案时先在vmware中登陆，修改虚拟机的IP：<br><img src="/images/2013/07/modify_ip.png" alt="modify_ip"></p>
<p>&nbsp;</p>
<p>后面就可以通过secretcrt之类工具在windows使用了，但是每次都这样改也不是长久之计，终极方案是彻底修改掉其IP，在suse下面是如下文件：</p>
<p>/etc/sysconfig/network/ifcfg-eth-id-00:0c:29:c5:67:f8(后面这串数字其实就是虚拟机的mac)</p>
<p>修改后直接重启即可。</p>
<p>如果选择copy，好像是会改变网络接口名，也就是这个eth0,eth1，在/etc/udev/rules.d/30-net_persistent_names.rules文件中有如下记录：</p>
<p><img src="/images/2013/07/suse_udev_net.png" alt="suse_udev_net"></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2013/07/06/gcc升级/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2013/07/06/gcc升级/" itemprop="url">gcc升级</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2013-07-06T15:43:40+08:00">
                2013-07-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/工具/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://gcc.gnu.org/install/这个是官方安装指导，比较全面，在网上看到一些方法大都不用这么复杂。下面记录一下前两天在我的CentOS" target="_blank" rel="noopener">http://gcc.gnu.org/install/这个是官方安装指导，比较全面，在网上看到一些方法大都不用这么复杂。下面记录一下前两天在我的CentOS</a> 6.2上面的升级记录：</p>
<p>1下载安装包，包括gmp-4.3.2.tar.bz2，mpfr-2.4.2.tar.bz2，mpc-0.8.1.tar.gz，gcc-4.7.2.tar.bz2</p>
<p>2由于安装包之间有依赖关系，必须依次安装，步骤为</p>
<ul>
<li>tar jxf gmp-4.3.2.tar.bz2<br>cd gmp-4.3.2<br>./configure –prefix=/usr/local/gmp<br>make &amp;&amp; make install</li>
<li>cd ../<br>tar jxf mpfr-2.4.2.tar.bz2<br>cd mpfr-2.4.2<br>./configure –prefix=/usr/local/mpfr –with-gmp=/usr/local/gmp<br>make &amp;&amp; make install</li>
<li>cd ../<br>tar xzf mpc-0.8.1.tar.gz<br>cd mpc-0.8.1<br>./configure –prefix=/usr/local/mpc –with-mpfr=/usr/local/mpfr –with-gmp=/usr/local/gmp<br>make &amp;&amp; make install</li>
<li>cd ../<br>tar jxf gcc-4.7.2.tar.bz2<br>cd gcc-4.7.2<br>./configure –prefix=/usr/local/gcc –enable-threads=posix –disable-checking –disable-multilib –enable-languages=c,c++ –with-gmp=/usr/local/gmp –with-mpfr=/usr/local/mpfr/ –with-mpc=/usr/local/mpc/</li>
<li>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/mpc/lib:/usr/local/gmp/lib:/usr/local/mpfr/lib/</li>
<li>make &amp;&amp; make install<br>在我的虚拟机上面2个小时才搞定，一切顺利的话剩下就是设置新的gcc，主要有两种方式：</li>
</ul>
<ol>
<li><span style="line-height: 14px;"><span style="line-height: 14px;">通过alias</span></span>alias g++=’/usr/local/gcc/bin/g++’<br>alias gcc=’/usr/local/gcc/bin/gcc’</li>
<li>通过ln建立软链接<br>mv /usr/bin{gcc,g++} /home/backup（记得一定要备份一下）</li>
</ol>
<p>ln -s /usr/local/gcc/bin/gcc /usr/bin/gcc</p>
<p>ln -s /usr/local/gcc/bin/g++ /usr/bin/g++</p>
<p>另外如果可以上网的话可以按照这篇文字的介绍安装（没有实测过，应该是可以的）</p>
<p><a href="http://www.cnblogs.com/linbc/archive/2012/08/03/2621169.html" target="_blank" rel="noopener">http://www.cnblogs.com/linbc/archive/2012/08/03/2621169.html</a></p>
<p>2013.10.17更新：</p>
<p>遇到/usr/lib/libstdc++.so.6: version `GLIBCXX_3.4.15’ not found问题，主要是没有将相应的库更新，在gcc源码目录里面找到最新的库，gcc-4.7.2里面最新的是libstdc++.so.6.0.17，将其拷贝到/usr/lib/目录下面，删除原有链接，新建链接即可：</p>
<p><div><code>rm</code> <code>-rf `</code>/usr/lib/libstdc<code></code>++.so.6`</div></p>
<p><div><code>ln</code> <code>-s `</code>/usr/lib/libstdc<code>++.so.6.0.17</code>/usr/lib64/libstdc<code></code>++.so.6`</div></p>
<p><div></div></p>
<p><div>2013.10.20更新：</div></p>
<p><div></div></p>
<p><div>今天在使用scons时发现提示”/usr/local/gcc/libexec/gcc/i686-pc-linux-gnu/4.7.2/cc1plus: error while loading shared libraries: libmpc.so.2: cannot open shared object file: No such file or directory”</div><br><span style="line-height: 24px;">主要是由于在scons中定义Environment()时没加ENV = os.environ，导致在~/.bash_profile中导出的路径无效了，加上这个就可以了。</span></p>
<p><span style="line-height: 24px;">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/mpc/lib:/usr/local/gmp/lib:/usr/local/mpfr/lib/<br></span></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2013/06/19/vs-create-project-from-filesystem/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2013/06/19/vs-create-project-from-filesystem/" itemprop="url">VS从现有代码创建工程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2013-06-19T23:13:48+08:00">
                2013-06-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/VC/" itemprop="url" rel="index">
                    <span itemprop="name">VC</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/VC/工具/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>当了好几年码工了，用得最多的IDE是VS，主要是配合助手实在是太强大了，偶尔也用用vim，eclipse，cb等工具，一直都觉得vs没有一个可以导入文件系统的方式创建工程很坑爹，这两天和同事交流才发现是自己一直都没有注意，vs(除了6)系列一直都有，且看下图(wordpress不能显示中文文件名的图？)：<br><img src="/images/2013/06/vs_create_prj_from_folder.png" alt="vs_create_prj_from_folder"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2013/04/11/linux下静态库、动态库相关问题总结/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2013/04/11/linux下静态库、动态库相关问题总结/" itemprop="url">linux下静态库、动态库相关问题总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2013-04-11T00:43:34+08:00">
                2013-04-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/转载/" itemprop="url" rel="index">
                    <span itemprop="name">转载</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><span style="line-height: 14px;">静态库链接顺序</span></li>
<li>静态库依赖问题<br>下面几个链接作为备忘，看完之后大部分linxu链接相关的问题都可以搞定了。</li>
</ul>
<p><a href="http://www.ibm.com/developerworks/cn/linux/l-cn-linklib/" target="_blank" rel="noopener">http://www.ibm.com/developerworks/cn/linux/l-cn-linklib/</a></p>
<p><a href="http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html" target="_blank" rel="noopener">http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html</a></p>
<p><a href="http://ticktick.blog.51cto.com/823160/431329" target="_blank" rel="noopener">http://ticktick.blog.51cto.com/823160/431329</a></p>
<p><a href="http://mooon.blog.51cto.com/1246491/908358" target="_blank" rel="noopener">http://mooon.blog.51cto.com/1246491/908358</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">billowqiu</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">155</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">31</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/billowqiu" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:billowqiu@163.com" target="_blank" title="E-Mail">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">billowqiu</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
