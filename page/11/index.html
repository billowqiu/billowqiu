<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="taocoding">
<meta property="og:url" content="http://yoursite.com/page/11/index.html">
<meta property="og:site_name" content="taocoding">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="taocoding">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/11/">





  <title>taocoding</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d13234060d812cb98a47e937139083a9";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">taocoding</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2009/05/15/另一种界面闪烁解决方案/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2009/05/15/另一种界面闪烁解决方案/" itemprop="url">另一种界面闪烁解决方案</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2009-05-15T22:49:00+08:00">
                2009-05-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/VC/" itemprop="url" rel="index">
                    <span itemprop="name">VC</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;基于贴图的界面中，为了实现界面的统一，一种方法就是所有界面类派上自一个贴图的基类，而基类中一般是进行最基本的贴图，派生类中多数会进行自己的其他绘制，这时如果不进行特殊处理必然会出现闪烁，因为基类和派生类不是一起绘制的，这里介绍一种方案避免闪烁，具体实现参看代码：</p>
<p>下面是基类，只是象征性的绘制了下：</p>
<pre style="border: 1px dotted #785;background: #f5f5f5;">#include &lt;atlgdi.h&gt;
#include &lt;atlmisc.h&gt;
template &lt;class T&gt;
class ATL_NO_VTABLE CFlickFreeBaseDlg : public CDialogImpl&lt;T&gt;
{
BEGIN_MSG_MAP_EX(CFlickFreeBaseDlg)
MSG_WM_PAINT(OnPaint)
MSG_WM_ERASEBKGND(OnEraseBkgnd)
END_MSG_MAP()
public:
CFlickFreeBaseDlg():m_pMemDC(NULL)
{

}
~CFlickFreeBaseDlg()
{
if (m_pMemDC)
{
delete m_pMemDC;
m_pMemDC=NULL;
}
}
protected:
void OnPaint(CDCHandle dc)
{
GetClientRect(&amp;m_rcClient);
CPaintDC dcPaint(m_hWnd);
if (NULL==m_pMemDC)
{
m_pMemDC=new CMemoryDC(dcPaint,m_rcClient);
}
//Do Base Paint
m_pMemDC-&gt;FillSolidRect(m_rcClient,RGB(0,100,255));
m_pMemDC-&gt;DrawText(_T("Draw In Base"),-1,CRect(0,0,80,20),DT_SINGLELINE|DT_VCENTER);
static_cast&lt;T*&gt;(this)-&gt;DerivingDraw();
delete m_pMemDC;
m_pMemDC=NULL;
}
BOOL OnEraseBkgnd(CDCHandle dc)
{
return TRUE;
}
protected:
CRect     m_rcClient;
CMemoryDC *m_pMemDC;
};</pre> 

<p>下面是派生类代码：</p>
<p><pre style="border: 1px dotted #785;background: #f5f5f5;">#include “FlickFreeBase.h”<br>class CMainDlg : public CFlickFreeBaseDlg&lt;CMainDlg&gt;, public CUpdateUI&lt;CMainDlg&gt;,<br>public CMessageFilter, public CIdleHandler<br>{<br>public:<br>enum { IDD = IDD_MAINDLG };</pre></p>
<p>virtual BOOL PreTranslateMessage(MSG* pMsg)<br>{<br>return CWindow::IsDialogMessage(pMsg);<br>}</p>
<p>virtual BOOL OnIdle()<br>{<br>return FALSE;<br>}</p>
<p>BEGIN_UPDATE_UI_MAP(CMainDlg)<br>END_UPDATE_UI_MAP()</p>
<p>BEGIN_MSG_MAP(CMainDlg)<br>CHAIN_MSG_MAP(CFlickFreeBaseDlg&lt;CMainDlg&gt;)<br>MESSAGE_HANDLER(WM_INITDIALOG, OnInitDialog)<br>MESSAGE_HANDLER(WM_DESTROY, OnDestroy)<br>COMMAND_ID_HANDLER(ID_APP_ABOUT, OnAppAbout)<br>COMMAND_ID_HANDLER(IDOK, OnOK)<br>COMMAND_ID_HANDLER(IDCANCEL, OnCancel)<br>END_MSG_MAP()</p>
<p>// Handler prototypes (uncomment arguments if needed):<br>//LRESULT MessageHandler(UINT /<em>uMsg</em>/, WPARAM /<em>wParam</em>/, LPARAM /<em>lParam</em>/, BOOL&amp; /<em>bHandled</em>/)<br>//LRESULT CommandHandler(WORD /<em>wNotifyCode</em>/, WORD /<em>wID</em>/, HWND /<em>hWndCtl</em>/, BOOL&amp; /<em>bHandled</em>/)<br>//LRESULT NotifyHandler(int /<em>idCtrl</em>/, LPNMHDR /<em>pnmh</em>/, BOOL&amp; /<em>bHandled</em>/)</p>
<p>LRESULT OnInitDialog(UINT /<em>uMsg</em>/, WPARAM /<em>wParam</em>/, LPARAM /<em>lParam</em>/, BOOL&amp; /<em>bHandled</em>/)<br>{<br>// center the dialog on the screen<br>CenterWindow();</p>
<p>// set icons<br>HICON hIcon = (HICON)::LoadImage(_Module.GetResourceInstance(), MAKEINTRESOURCE(IDR_MAINFRAME),<br>IMAGE_ICON, ::GetSystemMetrics(SM_CXICON), ::GetSystemMetrics(SM_CYICON), LR_DEFAULTCOLOR);<br>SetIcon(hIcon, TRUE);<br>HICON hIconSmall = (HICON)::LoadImage(_Module.GetResourceInstance(), MAKEINTRESOURCE(IDR_MAINFRAME),<br>IMAGE_ICON, ::GetSystemMetrics(SM_CXSMICON), ::GetSystemMetrics(SM_CYSMICON), LR_DEFAULTCOLOR);<br>SetIcon(hIconSmall, FALSE);</p>
<p>// register object for message filtering and idle updates<br>CMessageLoop* pLoop = _Module.GetMessageLoop();<br>ATLASSERT(pLoop != NULL);<br>pLoop-&gt;AddMessageFilter(this);<br>pLoop-&gt;AddIdleHandler(this);</p>
<p>UIAddChildWindowContainer(m_hWnd);</p>
<p>return TRUE;<br>}</p>
<p>LRESULT OnDestroy(UINT /<em>uMsg</em>/, WPARAM /<em>wParam</em>/, LPARAM /<em>lParam</em>/, BOOL&amp; /<em>bHandled</em>/)<br>{<br>// unregister message filtering and idle updates<br>CMessageLoop* pLoop = _Module.GetMessageLoop();<br>ATLASSERT(pLoop != NULL);<br>pLoop-&gt;RemoveMessageFilter(this);<br>pLoop-&gt;RemoveIdleHandler(this);</p>
<p>return 0;<br>}</p>
<p>LRESULT OnAppAbout(WORD /<em>wNotifyCode</em>/, WORD /<em>wID</em>/, HWND /<em>hWndCtl</em>/, BOOL&amp; /<em>bHandled</em>/)<br>{<br>CAboutDlg dlg;<br>dlg.DoModal();<br>return 0;<br>}</p>
<p>LRESULT OnOK(WORD /<em>wNotifyCode</em>/, WORD wID, HWND /<em>hWndCtl</em>/, BOOL&amp; /<em>bHandled</em>/)<br>{<br>// TODO: Add validation code<br>CloseDialog(wID);<br>return 0;<br>}</p>
<p>LRESULT OnCancel(WORD /<em>wNotifyCode</em>/, WORD wID, HWND /<em>hWndCtl</em>/, BOOL&amp; /<em>bHandled</em>/)<br>{<br>CloseDialog(wID);<br>return 0;<br>}</p>
<p>void CloseDialog(int nVal)<br>{<br>DestroyWindow();<br>::PostQuitMessage(nVal);<br>}</p>
<p>void DerivingDraw()<br>{<br>m_pMemDC-&gt;FillSolidRect(CRect(100,50,400,300),RGB(119,173,2));<br>m_pMemDC-&gt;DrawText(_T(“Draw In Deriving”),-1,CRect(100,50,400,300),DT_SINGLELINE|DT_VCENTER);<br>}<br>};&nbsp;</p>
<p>&nbsp;</p>
<p></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2009/05/11/wtl8-1-发布了/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2009/05/11/wtl8-1-发布了/" itemprop="url">WTL8.1 发布了</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2009-05-11T23:39:00+08:00">
                2009-05-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/VC/" itemprop="url" rel="index">
                    <span itemprop="name">VC</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://sourceforge.net/projects/wtl/" target="_blank" rel="noopener">http://sourceforge.net/projects/wtl/</a></p>
<p>&nbsp;</p>
<p>应该是个好兆头。</p>
<p></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2009/04/20/头文件和dll不一致导致的问题/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2009/04/20/头文件和dll不一致导致的问题/" itemprop="url">头文件和Dll不一致导致的问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2009-04-20T22:04:00+08:00">
                2009-04-20
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最近把年前那个项目全部重新编码，虽然对我来说多了点功能要做，但更多的还是界面，这次比上次更惨了，整个界面都得我一个人写，任何资源的添加都是我一个。这样有好也有坏，控制力度比较大，但是人也累得够呛。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 前段时间把登陆部分的功能搞定了，这不又重操旧业了，搞了一天终于把界面闪烁和透明子控件搞得差不多了，今天从办公室一同事那学到一招，哎，这就是经验的体现，由于Leader不让我把一工程添加进去(这个工程差全是界面方面的，所以只有我一个人使用)，每次都是把dll和头文件拷过去，今天搞得昏了，有一次忘了拷.h文件，只把dll拷过去了，结果就出问题了：</p>
<p>同样的&ldquo;代码&rdquo;运行确不同，代码执行的路径出现偏差，具体原因应该就是函数地址的偏移吧，那同事调了一会就指出，恍然大悟，更新.h果然就OK 了，这个问题太隐蔽了，头文件不一致导致函数地址的偏移，完全没有编译期的错误警告提示！</p>
<p></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2009/04/19/复制对象时勿忘其每一个成分/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2009/04/19/复制对象时勿忘其每一个成分/" itemprop="url">复制对象时勿忘其每一个成分</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2009-04-19T21:56:00+08:00">
                2009-04-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前言：看了好久Effective，但是感觉好多都是看了就忘，现在再看一边，顺便把一些易忘的记录下来，争取每天一记。</p>
<p>概念：Copying函数，包括copy constructor;copy assignment operator，对于默认的编译器生成版，会将被拷贝的对象的所有成员变量都做一份拷贝。</p>
<p>如果你自己声明一个copying函数，编译器就会以一种奇怪的方式回应：当你的实现代码几乎必然出错时却不告诉你.(不知道是作者原话还是译者，感觉挺有意思的)</p>
<p>该条款有两个需要注意的地方：1复制所有local成员变量2调用所有base classes内的copying函数。</p>
<p>第一个地方还好，比较容易理解，下面主要讲讲第二个-&gt;</p>
<p>&nbsp;</p>
<p>&nbsp; </p>
<div class="dp-highlighter  nogutter"><br><div class="bar"><br><div class="tools"><a href="file://C:/Users/QiuTao/Desktop/复制对象时勿忘其每一个成分 - whtuling2006的专栏 - CSDNBlog.mht#" target="_blank" rel="noopener"><span style="color: #336699;">view plain</span></a><a href="file://C:/Users/QiuTao/Desktop/复制对象时勿忘其每一个成分 - whtuling2006的专栏 - CSDNBlog.mht#" target="_blank" rel="noopener"><span style="color: #336699;">copy to clipboard</span></a><a href="file://C:/Users/QiuTao/Desktop/复制对象时勿忘其每一个成分 - whtuling2006的专栏 - CSDNBlog.mht#" target="_blank" rel="noopener"><span style="color: #336699;">print</span></a><a href="file://C:/Users/QiuTao/Desktop/复制对象时勿忘其每一个成分 - whtuling2006的专栏 - CSDNBlog.mht#" target="_blank" rel="noopener"><span style="color: #336699;">?</span></a></div><br></div>

<ol>
<li><span><span class="keyword">void</span><span>&nbsp;logCall(</span><span class="keyword">const</span><span>&nbsp;std::string&amp;&nbsp;funcName);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;make&nbsp;a&nbsp;log&nbsp;entry </span><span>&nbsp;&nbsp;</span></span></li>
<li><span class="keyword">class</span><span>&nbsp;Customer&nbsp;{ &nbsp;&nbsp;</span></li>
<li><span class="keyword">public</span><span>: &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;… &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;Customer(</span><span class="keyword">const</span><span>&nbsp;Customer&amp;&nbsp;rhs); &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;Customer&amp;&nbsp;operator=(</span><span class="keyword">const</span><span>&nbsp;Customer&amp;&nbsp;rhs); &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;… &nbsp;&nbsp;</span></li>
<li><span class="keyword">private</span><span>: &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;std::string&nbsp;name; &nbsp;&nbsp;</span></li>
<li><span>}; &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span>Customer::Customer(</span><span class="keyword">const</span><span>&nbsp;Customer&amp;&nbsp;rhs) &nbsp;&nbsp;</span></li>
<li><span>:&nbsp;name(rhs.name)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;copy&nbsp;rhs’s&nbsp;data </span><span>&nbsp;&nbsp;</span></li>
<li><span>{ &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;logCall(</span><span class="string">“Customer&nbsp;copy&nbsp;constructor”</span><span>); &nbsp;&nbsp;</span></li>
<li><span>} &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span>Customer&amp;&nbsp;Customer::operator=(</span><span class="keyword">const</span><span>&nbsp;Customer&amp;&nbsp;rhs) &nbsp;&nbsp;</span></li>
<li><span>{ &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;logCall(</span><span class="string">“Customer&nbsp;copy&nbsp;assignment&nbsp;operator”</span><span>); &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;name&nbsp;=&nbsp;rhs.name;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;*</span><span class="keyword">this</span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;</span></li>
<li><span>} &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span class="keyword">class</span><span>&nbsp;Date&nbsp;{&nbsp;…&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;for&nbsp;dates&nbsp;in&nbsp;time </span><span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span class="keyword">class</span><span>&nbsp;Customer&nbsp;{ &nbsp;&nbsp;</span></li>
<li><span class="keyword">public</span><span>: &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;…&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;as&nbsp;before </span><span>&nbsp;&nbsp;</span></li>
<li><span class="keyword">private</span><span>: &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;std::string&nbsp;name; &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;Date&nbsp;lastTransaction; &nbsp;&nbsp;</span></li>
<li><span>}; &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span class="keyword">class</span><span>&nbsp;PriorityCustomer:&nbsp;</span><span class="keyword">public</span><span>&nbsp;Customer&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;a&nbsp;derived&nbsp;class </span><span>&nbsp;&nbsp;</span></li>
<li><span class="keyword">public</span><span>: &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;… &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;PriorityCustomer(</span><span class="keyword">const</span><span>&nbsp;PriorityCustomer&amp;&nbsp;rhs); &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;PriorityCustomer&amp;&nbsp;operator=(</span><span class="keyword">const</span><span>&nbsp;PriorityCustomer&amp;&nbsp;rhs); &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;… &nbsp;&nbsp;</span></li>
<li><span class="keyword">private</span><span>: &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;&nbsp;</span><span class="datatypes"><strong><span style="color: #2e8b57;">int</span></strong></span><span>&nbsp;priority; &nbsp;&nbsp;</span></li>
<li><span>}; &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span>PriorityCustomer::PriorityCustomer(</span><span class="keyword">const</span><span>&nbsp;PriorityCustomer&amp;&nbsp;rhs) &nbsp;&nbsp;</span></li>
<li><span>:&nbsp;priority(rhs.priority) &nbsp;&nbsp;</span></li>
<li><span>{ &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;logCall(</span><span class="string">“PriorityCustomer&nbsp;copy&nbsp;constructor”</span><span>); &nbsp;&nbsp;</span></li>
<li><span>} &nbsp;&nbsp;</span></li>
<li><span>PriorityCustomer&amp;&nbsp;PriorityCustomer::operator=(</span><span class="keyword">const</span><span>&nbsp;PriorityCustomer&amp;&nbsp;rhs) &nbsp;&nbsp;</span></li>
<li><span>{ &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;logCall(</span><span class="string">“PriorityCustomer&nbsp;copy&nbsp;assignment&nbsp;operator”</span><span>); &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;priority&nbsp;=&nbsp;rhs.priority; &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;*</span><span class="keyword">this</span><span>; &nbsp;&nbsp;</span></li>
<li><span>}&nbsp;&nbsp;</span></li></ol></div>

<p>PriorityCustomer类的copying函数好像复制了PriorityCustomer内的每一样东西，它复制了PriorityCustomer声明的成员变量，但是其基类Customer成员变量却没有被复制(其实应该是没有按照相应的参数复制，而是使用了这些变量的default构造函数)，这一点是尤其需要注意的，尤其是没有真正写过类似代码时很容易忽视这个问题，正确的写法是下面这样的：</p>
<p>&nbsp;</p>
<div class="dp-highlighter  nogutter"><br><div class="bar"><br><div class="tools"><a href="file://C:/Users/QiuTao/Desktop/复制对象时勿忘其每一个成分 - whtuling2006的专栏 - CSDNBlog.mht#" target="_blank" rel="noopener"><span style="color: #336699;">view plain</span></a><a href="file://C:/Users/QiuTao/Desktop/复制对象时勿忘其每一个成分 - whtuling2006的专栏 - CSDNBlog.mht#" target="_blank" rel="noopener"><span style="color: #336699;">copy to clipboard</span></a><a href="file://C:/Users/QiuTao/Desktop/复制对象时勿忘其每一个成分 - whtuling2006的专栏 - CSDNBlog.mht#" target="_blank" rel="noopener"><span style="color: #336699;">print</span></a><a href="file://C:/Users/QiuTao/Desktop/复制对象时勿忘其每一个成分 - whtuling2006的专栏 - CSDNBlog.mht#" target="_blank" rel="noopener"><span style="color: #336699;">?</span></a></div><br></div>

<ol>
<li><span><span>PriorityCustomer::PriorityCustomer(</span><span class="keyword">const</span><span>&nbsp;PriorityCustomer&amp;&nbsp;rhs) &nbsp;&nbsp;</span></span></li>
<li><span>:Customer(rhs),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;invoke&nbsp;base&nbsp;class&nbsp;copy&nbsp;ctor </span><span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;priority(rhs.priority) &nbsp;&nbsp;</span></li>
<li><span>{ &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;logCall(</span><span class="string">“PriorityCustomer&nbsp;copy&nbsp;constructor”</span><span>); &nbsp;&nbsp;</span></li>
<li><span>} &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span></li>
<li><span>PriorityCustomer&amp;&nbsp;PriorityCustomer::operator=(</span><span class="keyword">const</span><span>&nbsp;PriorityCustomer&amp;&nbsp;rhs) &nbsp;&nbsp;</span></li>
<li><span>{ &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;logCall(</span><span class="string">“PriorityCustomer&nbsp;copy&nbsp;assignment&nbsp;operator”</span><span>); &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;Customer::operator=(rhs);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;assign&nbsp;base&nbsp;class&nbsp;parts </span><span>&nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;priority&nbsp;=&nbsp;rhs.priority; &nbsp;&nbsp;</span></li>
<li><span>&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;*</span><span class="keyword">this</span><span>; &nbsp;&nbsp;</span></li>
<li><span>}&nbsp;&nbsp;</span></li></ol></div>

<p>具体内容见Items12。</p>
<p></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2009/04/18/ws-clipchildren风格窗体控件透明的解决方案/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2009/04/18/ws-clipchildren风格窗体控件透明的解决方案/" itemprop="url">WS_CLIPCHILDREN风格窗体控件透明的解决方案</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2009-04-18T20:34:00+08:00">
                2009-04-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/VC/" itemprop="url" rel="index">
                    <span itemprop="name">VC</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><span style="font-size: medium;">在Windows下窗体都是矩形的，但是有时在做界面时尤其是需要贴图的界面中比如QQ2008(09另当别论)，很多时候控件都是&ldquo;非矩形&rdquo;的，主要是因为图片不是矩形的，可能需要边角地方透明比如</span><a href="http://blog.csdn.net/ToCpp/archive/2009/01/22/3849541.aspx" target="_blank" rel="noopener"><span style="font-size: medium;">http://blog.csdn.net/ToCpp/archive/2009/01/22/3849541.aspx</span></a><span style="font-size: medium;">中按钮的边角就不是矩形的，这时如果窗体的样式没有WS_CLIPCHILDREN倒很好弄，如果有这个样式就麻烦了，因为这个样式会使父窗体不绘制子窗体的区域。说到这里其实也就自然而然有一种解决方案了:就是在绘制控件前先绘制父窗体的背景，刚刚发现一个相当简单的实现方法，DrawThemeParentBackground，这个函数刚好实现需求，不过前提是XP以上系统才能用。当然通过自己获取父窗体背景再绘制也是可以的，具体方案网上就很多了。</span></p>
<p></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2009/04/07/一些步入正轨/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2009/04/07/一些步入正轨/" itemprop="url">一些步入正轨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2009-04-07T21:32:00+08:00">
                2009-04-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/生活轨迹/" itemprop="url" rel="index">
                    <span itemprop="name">生活轨迹</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近被电脑折腾得不行了，希望这次没有任何问题了，生活和学习也该步入正轨了。</p>
<p>附记今天看到的，TCP三路握手:</p>
<p>建立一个TCP连接：</p>
<p>(1)服务器准备接受客户端的连接</p>
<p>(2)客户端向服务器发起连接请求。此时客户端TCP发送一个SYN分节。</p>
<p>(3)服务器确认客户端的SYN（同步），同时也发送一个SYN分节。服务器以单个分节向客户端发送SYN和对客户端的SYN的ACK（确认）。</p>
<p>(4)客户端确认服务器的SYN。</p>
<p>此乃TCP的三路握手(three-way-handshake).</p>
<p>&nbsp;</p>
<p>这个概念应该是在学习计算机网络时就讲过的，而其还是很详细的，但是现在在工作中看到感觉还是不一样。</p>
<p></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2009/03/17/dialog注意事项/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2009/03/17/dialog注意事项/" itemprop="url">Dialog注意事项</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2009-03-17T22:28:00+08:00">
                2009-03-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/VC/" itemprop="url" rel="index">
                    <span itemprop="name">VC</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在CodeProject上面有两篇关于对话框的文章写得很不错，</p>
<p><a href="http://www.codeproject.com/KB/dialog/gettingmodeless.aspx" target="_blank" rel="noopener">http://www.codeproject.com/KB/dialog/gettingmodeless.aspx</a>关于Modeless的，</p>
<p><a href="http://www.codeproject.com/KB/dialog/dlgboxtricks.aspx" target="_blank" rel="noopener">http://www.codeproject.com/KB/dialog/dlgboxtricks.aspx</a>关于Dilaog的。</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000;">以下是今天自己总结的一点（仅在MFC上试验的）：</span></p>
<p><span style="color: #ff0000;">任何Window当单击标题栏上的X按钮时都会发生WM_CLOSE消息，从MSDN可以查到这个消息的默认实现是调用DestroyWindow，但是对于Modeless对话框貌似不是这样的，你必须自己调用DestroyWindow不知道这是不是就是MSDN说的Modeless必须自己调用DestroyWindow；</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000;">Model对话框的流程是这样的：</span></p>
<p><span style="color: #ff0000;">WM_CLOSE-&gt;OnCancel-&gt;OnDestroy其中多走了一道OnCancel，貌似Model对话框的WM_CLOSE也不直接调用DestroyWindow，而是在EndDialog间接调用。</span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000;">总结:对于Modeless在WM_CLOSE中自己调用DestroyWindow，否则会出问题的，而且尽量不要在里面有IDOK,IDCANCEL的按钮，即使有也要重载并调用DestroyWindow。</span></p>
<p>&nbsp;</p>
<p><span style="color: #339966;">以后有时间再把这个问题在SDK上跑一遍，MFC也真够烦的。</span></p>
<p></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2009/02/22/flicker-free-drawing-of-any-control/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2009/02/22/flicker-free-drawing-of-any-control/" itemprop="url">Flicker free drawing of any control</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2009-02-22T21:56:00+08:00">
                2009-02-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/VC/" itemprop="url" rel="index">
                    <span itemprop="name">VC</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><span class="bodycopy">&nbsp;</span></p>
<p>There are two articles dealing with this subject on this site, but i guess sometimes it’s needed to free one single control from flickering, and it’s not needed to use a complete new window-class. I will show you a really small solution of the flickering-problem, which uses the CMemDC-class from the article by Keith Rule. To make a control flicker free you have to go three steps, as described now.<br><br>#### 1. Override the OnEraseBkgnd()-routine of the control<br><br>Flickering apears, because the complete control is erased and it needs some time to fill the control-area with some text/graphics or whatever. There is a really short moment, when nothing can bee seen, because the background was erased but nothing is written yet. That’s why we don’t erase the background of the control anymore. to do this, we have to override the OnEraseBkgnd()-routine of the control like this:<br><br><pre>   BOOL CRecordList::OnEraseBkgnd(CDC* pDC)<br>   {<br>      <span style="color: #0000ff;"><span class="codeKeyword">return</span></span> FALSE;<br>   }<br></pre><br><br>#### 2. Override the OnPaint()-routine of the control<br><br>&nbsp;<br><br>The second thing to do, is to override the OnPaint()-routine. The trick is, to paint the complete control into a memory device-context and copy it in the original DC via BitBlt(). The CMemDC-class does this work for you. Because we don’t erase the background anymore (see above), we need to erase the memory-device-context with the background-color of the control. A typical OnPaint() should look like this:<br><br>&nbsp;<br><br><pre>   <span style="color: #0000ff;"><span class="codeKeyword">void</span></span> CRecordList::OnPaint()<br>   {<br>      CPaintDC dc(<span style="color: #0000ff;"><span class="codeKeyword">this</span></span>);<br>      CMemDC memDC(&amp;dc);<br><br>      CRect clip;<br>      memDC.GetClipBox(&amp;clip);<br>      memDC.FillSolidRect(clip, GetSysColor(COLOR_WINDOW));<br><br>      DefWindowProc(WM_PAINT, (WPARAM)memDC-&gt;m_hDC, (LPARAM)0);<br>   }<br></pre><br><br>#### 3. Override the EraseBkgnd()-routine of the control’s parent<br><br></p>

<p><a name="more"> </a></p>
<p>Imagine the following situation. You have a dialog with the flicker free control in it. And now the user resizes the window. What happens? First of all, the background of the dialog is erased and after that all controls of the window are redrawn. But when the background is erased and THAN the controls are redrawn, we still have flickering! That why we have to exclude the controls area out of the clipping-box of the control’s parent. And here’s how we do it: </p>
<pre>   BOOL CListBar::OnEraseBkgnd(CDC *pDC)
   {
      CRect clip;
      m_Control-&gt;GetWindowRect(&amp;clip);<span style="color: #009900;">// get rect of the control</span>

      ScreenToClient(&amp;clip);
      pDC-&gt;ExcludeClipRect(&amp;clip);

      pDC-&gt;GetClipBox(&amp;clip);
      pDC-&gt;FillSolidRect(clip, GetSysColor(COLOR_BTNFACE));

      <span style="color: #0000ff;"><span class="codeKeyword">return</span></span> FALSE;
   }

That's it. You can make near every control flicker free in this way, but for some of the controls, you have to change the routines above slightly. Like for the ListCtrl in Report-mode, because the columne-header-area have to be excluded of the clip-box, like this: 
<pre>   <span style="color: #0000ff;"><span class="codeKeyword">void</span></span> CRecordList::OnPaint()
   {
      CPaintDC dc(<span style="color: #0000ff;"><span class="codeKeyword">this</span></span>);

      CRect headerRect;
      GetDlgItem(0)-&gt;GetWindowRect(&amp;headerRect);
      ScreenToClient(&amp;headerRect);
      dc.ExcludeClipRect(&amp;headerRect);

      CMemDC memDC(&amp;dc);
      .
      .
      .
   }
</pre>

<p>&nbsp;</p>
<p>&nbsp;</p>
<p></p></pre><br><p></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2009/01/28/买本必看防商家忽悠秘籍/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2009/01/28/买本必看防商家忽悠秘籍/" itemprop="url">买本必看,防商家忽悠秘籍.</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2009-01-28T16:56:00+08:00">
                2009-01-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/生活轨迹/" itemprop="url" rel="index">
                    <span itemprop="name">生活轨迹</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="由于要买本了转篇提醒自己不要上当了"><a href="#由于要买本了转篇提醒自己不要上当了" class="headerlink" title="由于要买本了转篇提醒自己不要上当了!"></a><span style="color: #ff0000;">由于要买本了转篇提醒自己不要上当了!</span></h1><h1 id="买本必看-防商家忽悠秘籍-希望能帮到大家我可是写了半个小时哦-希望大家能耐性的看完我的文章"><a href="#买本必看-防商家忽悠秘籍-希望能帮到大家我可是写了半个小时哦-希望大家能耐性的看完我的文章" class="headerlink" title="买本必看,防商家忽悠秘籍.(希望能帮到大家我可是写了半个小时哦)希望大家能耐性的看完我的文章."></a>买本必看,防商家忽悠秘籍.(希望能帮到大家我可是写了半个小时哦)希望大家能耐性的看完我的文章.</h1><p>我现在从事笔记本电脑销售业务，以前在读大一的时候卖过本子.呵呵,那就结合自己的实际情况，写一篇对各位朋友友在购买笔记本电脑时有帮助的贴子吧．而目前这个市场也确实不规范，那么，就让我们擦亮眼睛，来看看怎么样防止电脑城形形色色的ＪＳ吧．先声明一下，电脑城绝大多数都是讲诚信的销售，包括我自己哦，但是，还是有一部分，为了赚钱确实是不择手段了，那么，让我们一起来看一下有哪些招数吧</p>
<p>第一：最重要的一点：不要轻易改变自己已经看好的笔记本电脑型号和配置！原因很简章，当你看中这一款了，你之前对这款的配置和价格都问了很多家经销商了．因为笔记本市场竞争激烈，基本上你问的价格对经销商来说，就没利润了．那怎么办呢？很简单，给你改型号，试想一下，你跑了一天了，那个型号也问的差不多了，而经销商通过各种技巧让你买另一款机子，看看天色也晚了，自己也跑累了，不想出去跑了，看着销售员＂善良＂的眼神，想想这个款也差不多，算了，不出去问了，就买吧，呵呵，那你就中招了．因为你对这款价格不了解，可以想像，经过这种转型而来产生的利润，绝对是暴力了，用我们行话来说，至少有1毛（1毛＝1000元）．如果你确实喜欢上了销售员推荐的新款，那么对付这招也很简单，不管销售员怎么向你保证价格是最低了．一定要拉下面子出去再问问价格，问了你就知道，你这样做是绝对有价值的．呵呵．很多厉害的销售员就吃准了客户不好意思的心理，让你不好意思走出他的店，那么，你自己也成为被宰的对象了．如果你出去问了，发现之前那个给你改型号的销售员价格比较合理，那么恭喜你，你遇到了非常少见讲诚信的销售员，还等什么呢？就在这买吧．</p>
<p>第二：问价格有也有讲究，如果你一开始就问一款机子大概的型号，比如，华硕的A8，你只说了A8两个字，那么，你问到的价格，多半是非常高的．因为这种情况下销售员肯定要报高价的，如果你说价格太高，他们也会说有很多种型号呢，配置多呢，我报的是ＸＸ配置，那你就没话说了．正确的问价方式是：报出精准的型号，如：A8H73SC-SL当你这样一问，做为销售员，就知道你是了解的非常清楚了，不然不会报出这么准确的型号，那么，他们也不敢胡乱报价了．这样你问到的价格就是非常实际的．而不是毫无意义的乱报的价格．</p>
<p>第三：不要为突然问到一个非常超低的让你感到脸发热心乱跳的超低价而激动不已，呵呵，事实上，很多销售员是这么干的，你要买这款机子是吧？了解一下价格，哦，我没钱赚，怎么办呢？转型啊，怎么转呢？第一步就是先给你报个超超低价，你一听，开心啊，激动啊，这么低的价格，不禁对这位销售员好感倍增．那么，你看好了，他第二步，肯定会说以前你看中的那个机子怎么怎么不适合你，我现在这款怎么怎么合适你．呵呵，记住哦，如果真的看中他新推荐的这一款，一定要出去多问几家，如果你不改变主意了，就不要浪费你时间了，让他拿货吧，多半是拿不出来的，因为他报的价格是低于成本报的，压根就没打算卖给你，结果浪费了你宝贵的时间，所以，我的忠告是：不要在报价最低的那一家买．你多半只会收获失望．</p>
<p>第四：对自己看好的配置一定要了解清楚．如果不懂，就找个懂的（怕就怕不懂装懂的人来做参谋，这样的人最容易被销售员三下两下就摆平了，一定要找确实很懂的人陪你）因为销售员很会利用你不懂配置来忽悠你，明明就是一样的机子，硬说多了一个什么独立显卡啊，或者是什么炫丽屏啊之类的，让你加钱购买．这样的客户在我眼里是很可悲的．我曾经亲眼见过笔记本电脑所带的电池居然也被销售员单独加价两千卖掉了，不懂电脑的用户毕竟多啊．如果你清楚配置，销售员这一招自然也没用了．</p>
<p>第五：当然还是要了解你要购买的机子的赠品，比如，华硕有段时间，Ｓ５笔记本电脑高配版是免费送第二块电池的，当然了，如果你不知道这个信息，销售员肯定会让你加个三五百的买第二块电池，没说的．其实像这样的促销，最简单的一点，厂家做这类促销的时候，肯定会有相关的彩页出来做宣传，你在了解电脑的阶段时只要记的向销售员索取一份彩页，基本上就不会中这一招了．当然了，在家里上一些非常大的网站了解一下，就更好了．</p>
<p>第六：很多淘友在买笔记本电脑的时候，非常喜欢要一些赠品，我告诉大家，销售员在送赠品的时候，只一个原则：最便宜．所以送的基本上全是垃圾．所以，最聪明的销售者，会先要东西，然后再跟销售员，这些东西我不要了，你给我减钱，呵呵，不要指望能减掉销售员跟你说这个值多少钱，那个值多少钱的程度，基本上，他说值１００元的东西，成本在30元就不错了．能减多少，就看你是怎么跟销售员谈啦．</p>
<p>第七：很不幸，厂家没有给经销商发样机来出样，所以，你们在电脑城看到的样机，全是要当新机卖掉的．当然了，样机也不会像一般人想象的那样，非常烂的机器，事实上，我们在为如何保护样机，可是非常用了心的．说难听点真是轻拿轻放，因为万一因为你造成样机划伤，你是要赔两百元来喷漆的．如果你真的不想要样机，不要看包装，没用的，有些大的商家连那个封条都自己去印了．那看什么呢？两点：第一：看接口处如网卡部分，有没有进灰尘，新机子是不会有灰的．其次，仔细看键盘里有无灰尘，表面有无划伤，特别是kinston锁孔，基本上因为考虑到防盗，这里都要锁上的，就难免有点划伤．如果这里有划伤，就可以确定是样机了．</p>
<p>第八：很多销售员说要开发票就要加钱，加几个几个税点，这就纯粹是欺骗了，因为笔记本电脑进货的时候就是含税的，不可能是要另加钱的．另外，很多销售员会说保修不用发票，只要收据就可以了．以此为借口不给你开发票只开收据．确实，保修的话，没发票也能保修．但请注意，还是有区别的．如果没有发票，保修日期是按出厂日期来计算的，有发票，则是按发票日期来计算保修日期的．而笔记本电脑库存两个月非常正常，所以想像一下，如果你不幸在那两个月的时候，机器坏了．．．还有一点；国家有一个法律叫＜微型计算机三包政策＞，哪三包呢？出现质量问题，七天包退，十五天包换，一年内，经两次维修仍不能正常使用的，包换．所谓三包．而如果你要享受这三包，那前提是，你得有发票．那为什么销售员不给你开发票呢？很简章，无利不起早，他可以把本属于你的发票卖给别人来获取利益．所以，购买整机的时候，一定要记的索取发票！</p>
<p>第九：可能说出来让很多人觉得人很难相信了，呵呵，但我告诉大家，以前我们那个店面，１５％的利润，都是拿回扣的人帮我们创造的．所以，如果你请熟人帮你把关电脑，记住一个原则即可：拉下面子，自己要独立的出去问问价格．这样，你就不会被人忽悠了．所以我就不大愿意帮熟人买电脑，因为我知道这一点，我不想背上这个骂名啊，我的方法是：你先自己出去问价格，然后我再帮你问，这样，你价格心中有底，就不会怕我拿回扣啦，呵呵．呵呵,希望经常帮朋友装机的熊友表打我哦.毕竟热心的朋友还是占多数的.</p>
<p>好了，写了有半个多小时了．暂时写这么多，其实还有很多陷阱，那就下次再写吧．如果有朋友友因为电脑硬件技术不明白的，可以随时问我．最好晚上，我时间比较多，毕竟白天我也要工作养家哦．呵呵，最后告诉大家，如果你看了我的贴还被骗了我就无语了.呵呵,另外,觉得是好贴的别忘了帮我顶一下哦,希望可以让更多的朋友得到帮助.<br><a href="http://itbbs.pconline.com.cn/notebook/8751105.html" target="_blank" rel="noopener">http://itbbs.pconline.com.cn/notebook/8751105.html</a></p>
<p></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2009/01/28/如何防止任务栏上出现一个窗口/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="billowqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="taocoding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2009/01/28/如何防止任务栏上出现一个窗口/" itemprop="url">如何防止任务栏上出现一个窗口</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2009-01-28T13:10:00+08:00">
                2009-01-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/VC/" itemprop="url" rel="index">
                    <span itemprop="name">VC</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>有时，可能需要为应用程序可以防止其主窗口出现在任务栏上。 本文介绍了可以完成这两种方法。</p>
<p>&nbsp;</p>
<p>有两种方法，若要防止一个窗口显示外壳的任务栏上和按 Alt+Tab 时出现的任务列表窗口中。 </p>
<ul>
<li>提供扩展的 WS_EX_TOOLWINDOW 样式窗口，并删除 WS_EX_APPWINDOW 样式。 一个的副作用窗口会较小比正常的窗口标题。*   为 WS_POPUP 样式窗口，并使拥有隐藏的窗口的其。</li>
</ul>
<p>如果一个窗口是创建或显示，因此其显示在任务栏中，然后在窗口应为相同的状态损坏或隐藏时。 如果在任务栏上的可见性不同步，然后任务栏可能最终与它认为应仍然显示该窗口的空白按钮。 </p>
<p>&nbsp;</p>
<p>原文:<a href="http://support.microsoft.com/kb/205158/" target="_blank" rel="noopener">http://support.microsoft.com/kb/205158/</a></p>
<p></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/10/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/12/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">billowqiu</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">152</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">30</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/billowqiu" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:billowqiu@163.com" target="_blank" title="E-Mail">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">billowqiu</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
